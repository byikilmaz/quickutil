"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8464],{68464:(e,t,a)=>{a.d(t,{m2:()=>u,Jh:()=>m});var i=a(27058),r=a(44595),s=a(34081);let o="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,15)),n=[],c=(e,t)=>{let a={id:"firebase_".concat(Date.now()),category:"firebase",severity:l(t.code),message:e.message,stack:e.stack,context:{code:t.code,...t.customData},timestamp:new Date,sessionId:o,recommendations:d(t.code),relatedIssues:[]};return n.push(a),a},l=e=>({"auth/api-key-not-valid":"critical","auth/invalid-api-key":"critical","auth/project-not-found":"critical","auth/user-not-found":"high","auth/wrong-password":"high","auth/invalid-email":"high","auth/user-disabled":"high","auth/email-already-in-use":"medium","auth/weak-password":"medium","auth/network-request-failed":"medium","permission-denied":"high","not-found":"medium","already-exists":"medium","resource-exhausted":"high",unauthenticated:"high"})[e]||"medium",d=e=>({"auth/api-key-not-valid":["Firebase Console'dan doğru API key'i kontrol edin","Environment variables'ları doğrulayın (.env.local)","Firebase project ayarlarını kontrol edin","API key'in kısıtlamalarını kontrol edin"],"auth/user-not-found":["Kullanıcının kayıtlı olup olmadığını kontrol edin","Email adresini doğrulayın","Kayıt sayfasına y\xf6nlendirin","Kullanıcı arama işlemini geliştirin"],"auth/wrong-password":["Şifre doğruluğunu kontrol edin","Şifre sıfırlama \xf6zelliği sunun","Caps Lock durumunu kontrol edin","Şifre g\xf6r\xfcn\xfcrl\xfck toggle'ı ekleyin"],"auth/email-already-in-use":["Giriş yapmaya y\xf6nlendirin","Email adresinin zaten kullanıldığını belirtin","Şifre sıfırlama se\xe7eneği sunun","Sosyal medya girişi alternatifi sunun"],"permission-denied":["Firestore security rules'ları kontrol edin","Kullanıcı authentication durumunu kontrol edin","Gerekli izinleri doğrulayın","Admin panelinden izinleri kontrol edin"],"auth/network-request-failed":["İnternet bağlantısını kontrol edin","Firebase servis durumunu kontrol edin","Retry mekanizması ekleyin","Offline mode desteği ekleyin"]})[e]||["Hata kodunu Firebase documentation'dan araştırın","Console'daki detaylı hata mesajlarını kontrol edin","Firebase support'a başvurun","Community forum'larda benzer durumları araştırın"];class u{static async createActivity(e,t){try{let a=new Date,o=new Date(a.getTime()+2592e6),n={userId:e,timestamp:a,expiresAt:o,...t,status:t.status||"processing"};t.downloadUrl&&(n.downloadUrl=t.downloadUrl),void 0!==t.compressionRatio&&(n.compressionRatio=t.compressionRatio),void 0!==t.processingTime&&(n.processingTime=t.processingTime),t.googleDriveFileId&&(n.googleDriveFileId=t.googleDriveFileId),void 0!==t.processedSize&&(n.processedSize=t.processedSize);let c=Object.fromEntries(Object.entries({...n,timestamp:i.Dc.fromDate(n.timestamp),expiresAt:i.Dc.fromDate(n.expiresAt)}).filter(e=>{let[,t]=e;return void 0!==t})),l={id:(await (0,i.gS)((0,i.rJ)(r.kA,s.I.USER_ACTIVITIES),c)).id,...n};return{success:!0,data:l,timestamp:a}}catch(a){return console.error("Error creating activity:",a),c(a,{code:a.code||"activity-create-failed",customData:{operation:"create_activity",userId:e,activityType:t.type}}),{success:!1,error:"Activity kaydı oluşturulamadı",timestamp:new Date}}}static async updateActivity(e,t){try{let a=(0,i.H9)(r.kA,s.I.USER_ACTIVITIES,e),o={};return Object.keys(t).forEach(e=>{let a=t[e];void 0!==a&&(o[e]=a)}),await (0,i.mZ)(a,o),{success:!0,data:!0,timestamp:new Date}}catch(a){return console.error("Error updating activity:",a),c(a,{code:a.code||"activity-update-failed",customData:{operation:"update_activity",activityId:e,updates:t}}),{success:!1,error:"Activity g\xfcncellenemedi",timestamp:new Date}}}static async getUserActivities(e,t){try{let a=(0,i.rJ)(r.kA,s.I.USER_ACTIVITIES),o=(0,i.P)(a,(0,i._M)("userId","==",e));(null==t?void 0:t.type)&&t.type.length>0&&(o=(0,i.P)(o,(0,i._M)("type","in",t.type))),(null==t?void 0:t.status)&&t.status.length>0&&(o=(0,i.P)(o,(0,i._M)("status","in",t.status))),(null==t?void 0:t.category)&&t.category.length>0&&(o=(0,i.P)(o,(0,i._M)("category","in",t.category))),(null==t?void 0:t.dateRange)&&(o=(0,i.P)(o,(0,i._M)("timestamp",">=",i.Dc.fromDate(t.dateRange.start)),(0,i._M)("timestamp","<=",i.Dc.fromDate(t.dateRange.end))));let n=(null==t?void 0:t.sortBy)||"timestamp",c=(null==t?void 0:t.sortOrder)||"desc";o=(0,i.P)(o,(0,i.My)(n,c));let l=(null==t?void 0:t.limit)||20;o=(0,i.P)(o,(0,i.AB)(l));let d=await (0,i.GG)(o),u=[];d.forEach(e=>{var t,a;let i=e.data();u.push({id:e.id,...i,timestamp:(null===(t=i.timestamp)||void 0===t?void 0:t.toDate())||new Date,expiresAt:(null===(a=i.expiresAt)||void 0===a?void 0:a.toDate())||new Date})});let m=u.length,p=Math.floor(((null==t?void 0:t.offset)||0)/l)+1,g=u.length===l;return{success:!0,data:{items:u,total:m,page:p,limit:l,hasMore:g},timestamp:new Date}}catch(a){return console.error("Error fetching user activities:",a),c(a,{code:a.code||"activities-fetch-failed",customData:{operation:"get_user_activities",userId:e,filter:t}}),{success:!1,error:"Aktiviteler getirilemedi",timestamp:new Date}}}static async getActivity(e){try{var t,a;let o=(0,i.H9)(r.kA,s.I.USER_ACTIVITIES,e),n=await (0,i.x7)(o);if(!n.exists())return{success:!1,error:"Aktivite bulunamadı",timestamp:new Date};let c=n.data(),l={id:n.id,...c,timestamp:(null===(t=c.timestamp)||void 0===t?void 0:t.toDate())||new Date,expiresAt:(null===(a=c.expiresAt)||void 0===a?void 0:a.toDate())||new Date};return{success:!0,data:l,timestamp:new Date}}catch(t){return console.error("Error fetching activity:",t),c(t,{code:t.code||"activity-fetch-failed",customData:{operation:"get_activity",activityId:e}}),{success:!1,error:"Aktivite detayı getirilemedi",timestamp:new Date}}}static async getUserStats(e){try{var t;let a=(0,i.rJ)(r.kA,s.I.USER_ACTIVITIES),o=(0,i.P)(a,(0,i._M)("userId","==",e),(0,i.My)("timestamp","desc")),n=await (0,i.GG)(o),c=0,l=0,d=0,u=0,m=0,p=0,g={pdf_compress:0,pdf_convert:0,image_compress:0,image_resize:0,image_crop:0,image_rotate:0,image_filter:0,image_batch:0,image_convert:0,pdf_merge:0,pdf_split:0},y=new Date().getMonth(),v=new Date().getFullYear();n.forEach(e=>{var t;let a=e.data();c++,a.fileSize&&a.processedSize&&(l+=a.fileSize-a.processedSize);let i=null===(t=a.timestamp)||void 0===t?void 0:t.toDate();i&&i.getMonth()===y&&i.getFullYear()===v&&d++,"success"===a.status&&u++,a.processingTime&&"number"==typeof a.processingTime&&(m+=a.processingTime,p++),a.type&&a.type in g&&g[a.type]++});let h=(null===(t=Object.entries(g).sort((e,t)=>{let[,a]=e,[,i]=t;return i-a})[0])||void 0===t?void 0:t[0])||"pdf_compress",f=c>0?u/c*100:0,D=p>0?m/p:0;return{success:!0,data:{totalFiles:c,totalSizeSaved:l,thisMonthFiles:d,favoriteFeature:h,successRate:f,avgProcessingTime:D},timestamp:new Date}}catch(t){return console.error("Error calculating user stats:",t),c(t,{code:t.code||"stats-calculation-failed",customData:{operation:"get_user_stats",userId:e}}),{success:!1,error:"İstatistikler hesaplanamadı",timestamp:new Date}}}static async getExpiringActivities(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let t=new Date;t.setDate(t.getDate()+e);let a=(0,i.rJ)(r.kA,s.I.USER_ACTIVITIES),o=(0,i.P)(a,(0,i._M)("expiresAt","<=",i.Dc.fromDate(t)),(0,i._M)("status","==","success"),(0,i.My)("expiresAt","asc")),n=await (0,i.GG)(o),c=[];return n.forEach(e=>{var t,a;let i=e.data();c.push({id:e.id,...i,timestamp:(null===(t=i.timestamp)||void 0===t?void 0:t.toDate())||new Date,expiresAt:(null===(a=i.expiresAt)||void 0===a?void 0:a.toDate())||new Date})}),{success:!0,data:c,timestamp:new Date}}catch(t){return console.error("Error fetching expiring activities:",t),c(t,{code:t.code||"expiring-activities-failed",customData:{operation:"get_expiring_activities",daysBeforeExpiration:e}}),{success:!1,error:"S\xfcresi dolan aktiviteler getirilemedi",timestamp:new Date}}}static async getCategoryCounts(e){try{let t=(0,i.rJ)(r.kA,s.I.USER_ACTIVITIES),a=(0,i.P)(t,(0,i._M)("userId","==",e)),o=await (0,i.GG)(a),n={PDF:0,Image:0,Document:0,Batch:0};return o.forEach(e=>{let t=e.data();t.category&&n.hasOwnProperty(t.category)&&n[t.category]++}),{success:!0,data:n,timestamp:new Date}}catch(t){return console.error("Error fetching category counts:",t),c(t,{code:t.code||"category-counts-failed",customData:{operation:"get_category_counts",userId:e}}),{success:!1,error:"Kategori sayıları getirilemedi",timestamp:new Date}}}}async function m(e,t,a,i,r,s){try{await u.createActivity(e,{type:"image_batch",fileName:"batch_".concat(t,"_").concat(a,"_files"),originalFileName:"".concat(a," files"),fileSize:i,processedSize:r,status:"success",category:"Batch",processingTime:s,compressionRatio:a})}catch(e){console.error("Batch tracking error:",e)}}},34081:(e,t,a)=>{a.d(t,{I:()=>i});let i={USERS:"users",USER_ACTIVITIES:"userActivities",FILE_METADATA:"fileMetadata",EMAIL_NOTIFICATIONS:"emailNotifications",GOOGLE_DRIVE_INTEGRATION:"googleDriveIntegration",USER_SETTINGS:"userSettings",SYSTEM_STATS:"systemStats",SCHEDULED_TASKS:"scheduledTasks",PROCESSING_QUEUE:"processingQueue",ERROR_LOGS:"errorLogs",USAGE_ANALYTICS:"usageAnalytics"}}}]);