(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7618],{50203:(e,t,s)=>{Promise.resolve().then(s.bind(s,79409))},79409:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(95155),a=s(12115),l=s(17146),d=s(76046),i=s(96551),n=s(81386),c=s(12461),o=s(59335),x=s(48146),h=s(58581),m=s(94973),u=s(15255),g=s(12800),j=s(66963),b=s(85747),y=s(71243),f=s(394),N=s(34920),p=s(38043),v=s(90457),w=s(67732);function k(){let{user:e,isAdmin:t,loading:s}=(0,l.A)(),k=(0,d.useRouter)(),[S,A]=(0,a.useState)([]),[D,F]=(0,a.useState)(!0),[C,E]=(0,a.useState)("30d");(0,a.useEffect)(()=>{if(!s&&(!e||!t)){k.push("/admin");return}},[e,t,s,k]),(0,a.useEffect)(()=>{let e=async()=>{if(t)try{F(!0);let e=await i.w.getActivityTrends();A(e)}catch(e){console.error("Chart data loading error:",e)}finally{F(!1)}};t&&e()},[t,C]);let z=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316"];if(s||D)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});let B=(()=>{let e={};return S.forEach(t=>{e[t.date]||(e[t.date]={date:t.date,total:0}),e[t.date][t.feature]=t.count,e[t.date].total+=t.count}),Object.values(e).sort((e,t)=>e.date.localeCompare(t.date))})(),R=(()=>{let e={};return S.forEach(t=>{e[t.feature]=(e[t.feature]||0)+t.count}),Object.entries(e).map(e=>{let[t,s]=e;return{feature:t,count:s}}).sort((e,t)=>t.count-e.count).slice(0,10)})();return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>k.push("/admin"),className:"mr-4 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)(n.A,{className:"h-5 w-5 text-gray-600"})}),(0,r.jsx)(c.A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Raporlar ve Analizler"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("select",{value:C,onChange:e=>E(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"7d",children:"Son 7 G\xfcn"}),(0,r.jsx)("option",{value:"30d",children:"Son 30 G\xfcn"}),(0,r.jsx)("option",{value:"90d",children:"Son 90 G\xfcn"})]}),(0,r.jsxs)("button",{onClick:()=>{},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Dışa Aktar"]})]})]})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Aktivite Trendi"}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"Son ","7d"===C?"7":"30d"===C?"30":"90"," g\xfcn"]})]}),(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(h.u,{width:"100%",height:"100%",children:(0,r.jsxs)(m.b,{data:B,children:[(0,r.jsx)(u.d,{strokeDasharray:"3 3"}),(0,r.jsx)(g.W,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>new Date(e).toLocaleDateString("tr-TR",{month:"short",day:"numeric"})}),(0,r.jsx)(j.h,{tick:{fontSize:12}}),(0,r.jsx)(b.m,{labelFormatter:e=>new Date(e).toLocaleDateString("tr-TR"),formatter:(e,t)=>[e,t]}),(0,r.jsx)(y.N,{type:"monotone",dataKey:"total",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",strokeWidth:2,r:4},activeDot:{r:6}})]})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Pop\xfcler \xd6zellikler"}),(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(h.u,{width:"100%",height:"100%",children:(0,r.jsxs)(f.E,{data:R,layout:"horizontal",children:[(0,r.jsx)(u.d,{strokeDasharray:"3 3"}),(0,r.jsx)(g.W,{type:"number",tick:{fontSize:12}}),(0,r.jsx)(j.h,{type:"category",dataKey:"feature",tick:{fontSize:12},width:100}),(0,r.jsx)(b.m,{formatter:e=>[e,"Kullanım"]}),(0,r.jsx)(N.y,{dataKey:"count",fill:"#10B981",radius:[0,4,4,0]})]})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"\xd6zellik Dağılımı"}),(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(h.u,{width:"100%",height:"100%",children:(0,r.jsxs)(p.r,{children:[(0,r.jsx)(v.F,{data:R.slice(0,6),dataKey:"count",nameKey:"feature",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:e=>{let{name:t,percent:s}=e;return"".concat(t||"Unknown"," (").concat((100*(s||0)).toFixed(1),"%)")},children:R.slice(0,6).map((e,t)=>(0,r.jsx)(w.f,{fill:z[t%z.length]},"cell-".concat(t)))}),(0,r.jsx)(b.m,{})]})})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"\xd6zet İstatistikler"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:B.reduce((e,t)=>e+t.total,0).toLocaleString()}),(0,r.jsx)("div",{className:"text-gray-600",children:"Toplam İşlem"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:B.length>0?Math.round(B.reduce((e,t)=>e+t.total,0)/B.length):0}),(0,r.jsx)("div",{className:"text-gray-600",children:"G\xfcnl\xfck Ortalama"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:R.length}),(0,r.jsx)("div",{className:"text-gray-600",children:"Aktif \xd6zellik"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dışa Aktarma Se\xe7enekleri"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("button",{className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 mr-2 text-gray-500"}),"CSV Raporu"]}),(0,r.jsxs)("button",{className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 mr-2 text-gray-500"}),"Excel Raporu"]}),(0,r.jsxs)("button",{className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 mr-2 text-gray-500"}),"PDF Raporu"]})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,1794,8779,8405,6921,946,6335,3238,9290,5019,8047,6366,2432,7979,4884,7098,9744,2033,2322,9592,7331,5030,8392,7694,3719,5845,9915,8049,2922,6137,5070,2707,8007,39,408,6727,5370,4191,2834,957,4895,5759,9473,4409,8878,8441,7358],()=>t(50203)),_N_E=e.O()}]);