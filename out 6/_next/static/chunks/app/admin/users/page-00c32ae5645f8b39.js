(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{46242:(e,s,t)=>{Promise.resolve().then(t.bind(t,72342))},72342:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(95155),r=t(12115),l=t(17146),i=t(76046),c=t(27058),n=t(44595),d=t(34081),o=t(81386),m=t(94090),x=t(17721);function u(){let{user:e,isAdmin:s,loading:t}=(0,l.A)(),u=(0,i.useRouter)(),[g,y]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[N,j]=(0,r.useState)(!0),[v,b]=(0,r.useState)(""),[w,A]=(0,r.useState)(null);return((0,r.useEffect)(()=>{if(!t&&(!e||!s)){u.push("/admin");return}},[e,s,t,u]),(0,r.useEffect)(()=>{let e=async()=>{if(s)try{j(!0);let e=(0,c.rJ)(n.kA,d.I.USERS),s=(0,c.P)(e,(0,c.My)("createdAt","desc"),(0,c.AB)(100)),t=await (0,c.GG)(s),a=[];t.forEach(e=>{var s,t;let r=e.data();a.push({id:e.id,email:r.email,firstName:r.firstName,lastName:r.lastName,emailVerified:r.emailVerified||!1,createdAt:(null===(s=r.createdAt)||void 0===s?void 0:s.toDate())||new Date,lastLoginAt:null===(t=r.lastLoginAt)||void 0===t?void 0:t.toDate(),activityCount:0})}),y(a),p(a)}catch(e){console.error("Users loading error:",e)}finally{j(!1)}};s&&e()},[s]),(0,r.useEffect)(()=>{""===v.trim()?p(g):p(g.filter(e=>e.email.toLowerCase().includes(v.toLowerCase())||e.firstName.toLowerCase().includes(v.toLowerCase())||e.lastName.toLowerCase().includes(v.toLowerCase())))},[v,g]),t||N)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>u.push("/admin"),className:"mr-4 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,a.jsx)(o.A,{className:"h-5 w-5 text-gray-600"})}),(0,a.jsx)(m.A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Kullanıcı Y\xf6netimi"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Toplam ",g.length," kullanıcı"]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Kullanıcı ara (email, ad, soyad)...",value:v,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kullanıcı"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email Durumu"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kayıt Tarihi"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aktivite"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:f.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.emailVerified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.emailVerified?"Doğrulandı":"Bekliyor"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.createdAt?"Mevcut":"Bilinmiyor"}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[e.activityCount||0," işlem"]})]},e.id))})]})}),0===f.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:v?"Arama kriterleriyle eşleşen kullanıcı bulunamadı":"Hen\xfcz kullanıcı yok"})]})]})]}),w&&(0,a.jsx)(h,{user:w,onClose:()=>A(null)})]})}function h(e){let{user:s,onClose:t}=e,[l,i]=(0,r.useState)(null),[c,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{i({activities:[],stats:{totalActivities:0,successfulActivities:0,totalFileSize:0,averageProcessingTime:0}})}catch(e){console.error("User details loading error:",e)}finally{n(!1)}})()},[s.id]),(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-96 overflow-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),(0,a.jsx)("p",{className:"text-gray-600",children:s.email})]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),c?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Kayıt Tarihi"}),(0,a.jsx)("p",{className:"font-semibold",children:s.createdAt.toLocaleDateString("tr-TR")})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Email Durumu"}),(0,a.jsx)("p",{className:"font-semibold",children:s.emailVerified?"Doğrulandı":"Bekliyor"})]})]}),l&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Aktivite İstatistikleri"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"Toplam İşlem"}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-900",children:l.stats.totalActivities})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm text-green-600",children:"Başarılı İşlem"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-900",children:l.stats.successfulActivities})]})]})]})]})]})})})}},17146:(e,s,t)=>{"use strict";t.d(s,{A:()=>n,O:()=>d});var a=t(95155),r=t(12115),l=t(14565),i=t(44595);let c=(0,r.createContext)(void 0),n=()=>(0,r.useContext)(c)||(console.warn("useAuth called outside AuthProvider, returning mock values"),{user:null,userProfile:null,isAdmin:!1,emailVerified:!1,loading:!1,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},resendVerification:async()=>{}}),d=e=>{let{children:s}=e,[t,n]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[m,x]=(0,r.useState)(!0),[u,h]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{h(!0)},[]),(0,r.useEffect)(()=>{if(u)try{return(0,l.hg)(i.j2,e=>{if(n(e),e){var s,t;o({firstName:(null===(s=e.displayName)||void 0===s?void 0:s.split(" ")[0])||"",lastName:(null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[1])||"",email:e.email||"",createdAt:new Date})}else o(null);x(!1)})}catch(e){console.error("Auth setup error:",e),x(!1)}},[u]);let f=async(e,s)=>{try{await (0,l.x9)(i.j2,e,s)}catch(e){throw console.error("Login error:",e),e}},p=async(e,s,t,a)=>{try{await (0,l.eJ)(i.j2,e,s)}catch(e){throw console.error("Registration error:",e),e}},N=async()=>{try{t&&await (0,l.gA)(t)}catch(e){throw console.error("Resend verification error:",e),e}},j=async()=>{try{await (0,l.CI)(i.j2),o(null)}catch(e){throw console.error("Logout error:",e),e}},v={user:t,userProfile:d,isAdmin:!1,emailVerified:(null==t?void 0:t.emailVerified)||!1,loading:m,error:g,login:f,register:p,logout:j,resendVerification:N};return u?(0,a.jsx)(c.Provider,{value:v,children:s}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}},44595:(e,s,t)=>{"use strict";t.d(s,{IG:()=>x,j2:()=>o,kA:()=>m});var a=t(49904),r=t(14565),l=t(27058),i=t(80333),c=t(42205);let n={apiKey:"AIzaSyCRDKZr-JKCk4L29UlrRE-lh1Q1bDAD3j8",authDomain:"quickutil-d2998.firebaseapp.com",projectId:"quickutil-d2998",storageBucket:"quickutil-d2998.firebasestorage.app",messagingSenderId:"768751015182",appId:"1:768751015182:web:ef3472a90fccf57a72335f"};if(!n.apiKey)throw Error("Firebase API key is missing. Please check your environment variables.");let d=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)(n),o=(0,r.xI)(d),m=(0,l.aU)(d),x=(0,i.c7)(d);(0,c.Uz)(d),(0,r.oM)(o,r.F0).catch(e=>{console.warn("Auth persistence setup failed:",e)})},34081:(e,s,t)=>{"use strict";t.d(s,{I:()=>a});let a={USERS:"users",USER_ACTIVITIES:"userActivities",FILE_METADATA:"fileMetadata",EMAIL_NOTIFICATIONS:"emailNotifications",GOOGLE_DRIVE_INTEGRATION:"googleDriveIntegration",USER_SETTINGS:"userSettings",SYSTEM_STATS:"systemStats",SCHEDULED_TASKS:"scheduledTasks",PROCESSING_QUEUE:"processingQueue",ERROR_LOGS:"errorLogs",USAGE_ANALYTICS:"usageAnalytics"}}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,1794,8779,8405,6921,946,6335,3238,9290,5019,8047,6366,2432,7979,4884,7098,9744,2033,2322,9592,7331,5030,8392,7694,3719,5845,9915,8049,2922,6137,5070,2707,8007,39,408,6727,5370,4191,2834,957,4895,5759,9473,4409,8441,7358],()=>s(46242)),_N_E=e.O()}]);