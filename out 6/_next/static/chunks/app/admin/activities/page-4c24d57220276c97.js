(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{66733:(e,s,t)=>{Promise.resolve().then(t.bind(t,77191))},77191:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(95155),r=t(12115),l=t(17146),i=t(76046),c=t(96551),n=t(14826),x=t(12526),d=t(27072),m=t(38217),o=t(81386),h=t(1572);function u(){let{user:e,isAdmin:s,loading:t}=(0,l.A)(),u=(0,i.useRouter)(),[p,g]=(0,r.useState)([]),[y,j]=(0,r.useState)([]),[f,N]=(0,r.useState)(!0),[b,w]=(0,r.useState)("all"),[v,k]=(0,r.useState)("all"),[A,S]=(0,r.useState)([]);if((0,r.useEffect)(()=>{if(!t&&(!e||!s)){u.push("/admin");return}},[e,s,t,u]),(0,r.useEffect)(()=>{let e=async()=>{if(s)try{N(!0);let e=await c.w.getRecentActivities(200);g(e),j(e);let s=Array.from(new Set(e.map(e=>e.type)));S(s)}catch(e){console.error("Activities loading error:",e)}finally{N(!1)}};s&&e()},[s]),(0,r.useEffect)(()=>{let e=p;"all"!==b&&(e=e.filter(e=>e.status===b)),"all"!==v&&(e=e.filter(e=>e.type===v)),j(e)},[p,b,v]),t||f)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});let B=e=>{switch(e){case"success":return(0,a.jsx)(n.A,{className:"h-5 w-5 text-green-500"});case"error":return(0,a.jsx)(x.A,{className:"h-5 w-5 text-red-500"});case"processing":return(0,a.jsx)(d.A,{className:"h-5 w-5 text-yellow-500"});default:return(0,a.jsx)(m.A,{className:"h-5 w-5 text-gray-500"})}},E=e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({success:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800",processing:"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100 text-gray-800"),children:{success:"Başarılı",error:"Hata",processing:"İşleniyor"}[e]||e}),M=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>u.push("/admin"),className:"mr-4 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,a.jsx)(o.A,{className:"h-5 w-5 text-gray-600"})}),(0,a.jsx)(d.A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Aktivite Logları"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[y.length," / ",p.length," aktivite"]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),(0,a.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"T\xfcm\xfc"}),(0,a.jsx)("option",{value:"success",children:"Başarılı"}),(0,a.jsx)("option",{value:"error",children:"Hata"}),(0,a.jsx)("option",{value:"processing",children:"İşleniyor"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\xd6zellik"}),(0,a.jsxs)("select",{value:v,onChange:e=>k(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"T\xfcm\xfc"}),A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zaman"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kullanıcı"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlem"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dosya"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S\xfcre"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.timestamp.toLocaleString("tr-TR")}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.userEmail||"Anonim"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.userId})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[B(e.status),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-900",children:e.type})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.fileName}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:M(e.fileSize)})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[E(e.status),e.errorMessage&&(0,a.jsx)("div",{className:"text-xs text-red-600 mt-1 max-w-xs truncate",children:e.errorMessage})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.processingTime?"".concat(e.processingTime,"ms"):"-"})]},e.id))})]})}),0===y.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:0===p.length?"Hen\xfcz aktivite yok":"Filtrelere uygun aktivite bulunamadı"})]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Yenile"})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,1794,8779,8405,6921,946,6335,3238,9290,5019,8047,6366,2432,7979,4884,7098,9744,2033,2322,9592,7331,5030,8392,7694,3719,5845,9915,8049,2922,6137,5070,2707,8007,39,408,6727,5370,4191,2834,957,4895,5759,9473,4409,8878,8441,7358],()=>s(66733)),_N_E=e.O()}]);