"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{63206:(e,a,t)=>{t.d(a,{A:()=>u});var r=t(95155),l=t(12115),s=t(27919),i=t(14826),n=t(99113),o=t(3623),c=t(37553),d=t(60915);function u(e){let{onFileSelect:a,acceptedTypes:t,maxSize:u,title:m,description:x,multiple:p=!1,currentFiles:h=[],locale:g="en",texts:f={selectFiles:"Select Files",selectFile:"Select File",dragDrop:"Drag & Drop",maxSize:"Max Size",supportedFormats:"Supported Formats",maxFiles:"Max Files",securityNotice:"Your files are processed securely in your browser",fileUploaded:"File Uploaded Successfully!",readyToProcess:"Ready to Process",fileReady:"File Ready",size:"Size",fileRequirements:"File Requirements",uploadFailed:"Upload Failed",or:"or"}}=e,[y,w]=(0,l.useState)(!1),b=(0,l.useCallback)(e=>{console.log("FileUpload onDrop called:",e),e.length>0&&(p?(console.log("Calling onFileSelect with multiple files:",e),a(e)):(console.log("Calling onFileSelect with single file:",e[0]),a(e[0])))},[a,p]),{getRootProps:F,getInputProps:j,isDragActive:v,fileRejections:N}=(0,s.VB)({onDrop:b,accept:t.reduce((e,a)=>(e[a]=[],e),{}),maxSize:u,maxFiles:p?10:1,onDragEnter:()=>w(!0),onDragLeave:()=>w(!1),onDropAccepted:()=>w(!1),onDropRejected:()=>w(!1)}),S=e=>{if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]},z=()=>t.map(e=>{switch(e){case"application/pdf":return"PDF";case"image/jpeg":return"JPEG";case"image/png":return"PNG";case"image/gif":return"GIF";case"image/webp":return"WebP";default:var a;return(null===(a=e.split("/")[1])||void 0===a?void 0:a.toUpperCase())||e}}).join(", ");return h.length>0&&!p?(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)("div",{className:"border-2 border-green-300 bg-green-50 rounded-xl p-8 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"p-4 bg-green-100 rounded-full",children:(0,r.jsx)(i.A,{className:"h-12 w-12 text-green-600"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-green-900",children:f.fileUploaded}),(0,r.jsxs)("p",{className:"text-green-700",children:[(0,r.jsx)("span",{className:"font-medium",children:h[0].name})," ",f.readyToProcess]}),(0,r.jsxs)("p",{className:"text-sm text-green-600",children:[f.size,": ",S(h[0].size)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-white rounded-lg px-4 py-2 border border-green-200",children:[(0,r.jsx)(n.A,{className:"h-5 w-5 text-green-600"}),(0,r.jsx)("span",{className:"text-green-800 font-medium",children:f.fileReady})]})]})})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{...F(),className:"relative border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all duration-300 ".concat(v||y?"border-blue-500 bg-blue-50 scale-105":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"),children:[(0,r.jsx)("input",{...j()}),v&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl animate-pulse"}),(0,r.jsxs)("div",{className:"relative flex flex-col items-center space-y-6",children:[(0,r.jsx)("div",{className:"transition-all duration-300 ".concat(v?"scale-110":""),children:v?(0,r.jsx)(o.A,{className:"h-16 w-16 text-blue-500"}):(0,r.jsx)(c.A,{className:"h-16 w-16 text-gray-400"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:m}),(0,r.jsx)("p",{className:"text-gray-600 max-w-md mx-auto",children:x})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{type:"button",className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:p?f.selectFiles:f.selectFile}),(0,r.jsx)("span",{className:"text-gray-500 font-medium",children:f.or}),(0,r.jsx)("span",{className:"text-blue-600 font-medium",children:f.dragDrop})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600 space-y-2 max-w-md mx-auto",children:[(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:f.fileRequirements})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"font-medium",children:[f.maxSize,":"]}),(0,r.jsx)("span",{className:"text-gray-800",children:S(u)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"font-medium",children:[f.supportedFormats,":"]}),(0,r.jsx)("span",{className:"text-gray-800",children:z()})]}),p&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"font-medium",children:[f.maxFiles,":"]}),(0,r.jsx)("span",{className:"text-gray-800",children:"Max Files"===f.maxFiles?"10 files":"10 dosya"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),(0,r.jsx)("span",{children:f.securityNotice})]})]})]})]}),N.length>0&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,r.jsx)(d.A,{className:"h-5 w-5 text-red-600"}),(0,r.jsx)("h4",{className:"font-medium text-red-900",children:f.uploadFailed})]}),(0,r.jsx)("div",{className:"space-y-2",children:N.map(e=>{let{file:a,errors:t}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-red-200",children:[(0,r.jsx)("div",{className:"font-medium text-red-900 mb-1",children:a.name}),(0,r.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:t.map(e=>(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-red-500 mr-2",children:"•"}),(0,r.jsx)("span",{children:"file-too-large"===e.code?"".concat(f.uploadFailed,": ").concat(S(a.size),". ").concat(f.maxSize,": ").concat(S(u)):"file-invalid-type"===e.code?"".concat(f.uploadFailed,": ").concat(z()):e.message})]},e.code))})]},a.name)})})]})]})}},96446:(e,a,t)=>{t.d(a,{S:()=>n,a:()=>o});var r=t(95155),l=t(12115),s=t(17146);let i=(0,l.createContext)(void 0);function n(e){let{children:a}=e,{user:t}=(0,s.A)(),l={unlimited:!0,storageEnabled:!!t,maxFileSize:100,filesExpireInDays:30};return(0,r.jsx)(i.Provider,{value:{quotaInfo:l,canUseFeature:()=>!0,canStoreFiles:()=>!!t,checkFileSize:e=>e<=1048576*l.maxFileSize,getMaxFileSize:()=>l.maxFileSize,loading:!1},children:a})}function o(){let e=(0,l.useContext)(i);return void 0===e?(console.log("useQuota called outside QuotaProvider, returning mock values"),{quotaInfo:{unlimited:!0,storageEnabled:!1,maxFileSize:100,filesExpireInDays:30},canUseFeature:()=>!0,canStoreFiles:()=>!1,checkFileSize:()=>!0,getMaxFileSize:()=>100,loading:!1}):e}},68651:(e,a,t)=>{t.d(a,{L:()=>c,r:()=>o});var r=t(95155),l=t(12115),s=t(17146),i=t(56960);let n=(0,l.createContext)(null),o=()=>(0,l.useContext)(n)||(console.log("useStorage called outside StorageProvider, returning mock values"),{files:[],quota:{used:0,limit:0x140000000,percentage:0},loading:!1,error:null,uploadFile:async()=>({file:{},downloadURL:""}),deleteFile:async()=>{},refreshFiles:async()=>{},refreshQuota:async()=>{},cleanupExpiredFiles:async()=>0}),c=e=>{let{children:a}=e,{user:t}=(0,s.A)(),[o,c]=(0,l.useState)([]),[d,u]=(0,l.useState)({used:0,limit:0x140000000,percentage:0}),[m,x]=(0,l.useState)(!1),[p,h]=(0,l.useState)(null),g=(0,l.useCallback)(async()=>{if(!t){c([]);return}try{h(null);let e=await i.b.listUserFiles(t.uid);c(e)}catch(e){console.error("Error loading files:",e),h("Dosyalar y\xfcklenirken hata oluştu"),c([])}},[t]),f=(0,l.useCallback)(async()=>{if(!t){u({used:0,limit:0x140000000,percentage:0});return}try{let e=await i.b.calculateUserQuota(t.uid);u(e)}catch(e){console.error("Error loading quota:",e)}},[t]);(0,l.useEffect)(()=>{t?(g(),f()):(c([]),u({used:0,limit:0x140000000,percentage:0}))},[t,g,f]);let y=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf",r=arguments.length>2?arguments[2]:void 0;if(!t)throw Error("Kullanıcı giriş yapmamış");try{h(null),x(!0);let l=await i.b.uploadFile(t.uid,e,a,r);return await g(),await f(),l}catch(e){throw console.error("Error uploading file:",e),h("Dosya y\xfckleme başarısız"),e}finally{x(!1)}},w=async e=>{if(!t)throw Error("Kullanıcı giriş yapmamış");try{h(null),x(!0),await i.b.deleteFile(t.uid,e),await g(),await f()}catch(e){throw console.error("Error deleting file:",e),h("Dosya silinirken hata oluştu"),e}finally{x(!1)}},b=async()=>{await g()},F=async()=>{await f()},j=async()=>{if(!t)throw Error("Kullanıcı giriş yapmamış");try{h(null),x(!0);let e=await i.b.cleanupExpiredFiles(t.uid);return await g(),await f(),e}catch(e){throw console.error("Error cleaning up files:",e),h("Dosya temizleme başarısız"),e}finally{x(!1)}};return(0,r.jsx)(n.Provider,{value:{files:o,quota:d,loading:m,error:p,uploadFile:y,deleteFile:w,refreshFiles:b,refreshQuota:F,cleanupExpiredFiles:j},children:a})}},56960:(e,a,t)=>{t.d(a,{b:()=>s});var r=t(80333),l=t(44595);class s{static async uploadFile(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pdf",s=arguments.length>3?arguments[3]:void 0;try{let i=Date.now(),n=s||"".concat(t,"_").concat(i,"_").concat(a.name),o="users/".concat(e,"/").concat(t,"/").concat(n),c=(0,r.KR)(l.IG,o),d={contentType:a.type,customMetadata:{userId:e,originalName:a.name,uploadedAt:new Date().toISOString(),expiresAt:new Date(Date.now()+2592e6).toISOString(),category:t}},u=await (0,r.D)(c,a,d),m=await (0,r.qk)(u.ref),x=await (0,r.yb)(u.ref),p={id:u.ref.name,name:n,fullPath:u.ref.fullPath,size:x.size,contentType:x.contentType||a.type,timeCreated:x.timeCreated,updated:x.updated,downloadURL:m};return console.log("File uploaded to Firebase Storage:",p),{file:p,downloadURL:m}}catch(e){throw console.error("Firebase Storage upload error:",e),Error("Dosya y\xfckleme başarısız")}}static async listUserFiles(e){try{let a=(0,r.KR)(l.IG,"users/".concat(e)),t=await (0,r._w)(a),s=[];for(let e of t.prefixes)for(let a of(await (0,r._w)(e)).items)try{let[e,t]=await Promise.all([(0,r.yb)(a),(0,r.qk)(a)]);s.push({id:a.name,name:a.name,fullPath:a.fullPath,size:e.size,contentType:e.contentType||"application/octet-stream",timeCreated:e.timeCreated,updated:e.updated,downloadURL:t})}catch(e){console.warn("Error getting file metadata:",a.fullPath,e)}return s.sort((e,a)=>new Date(a.timeCreated).getTime()-new Date(e.timeCreated).getTime()),s}catch(e){throw console.error("Firebase Storage list error:",e),Error("Dosya listesi alınamadı")}}static async deleteFile(e,a){try{if(!a.startsWith("users/".concat(e,"/")))throw Error("Bu dosyaya erişim izniniz yok");let t=(0,r.KR)(l.IG,a);await (0,r.XR)(t),console.log("File deleted from Firebase Storage:",a)}catch(e){throw console.error("Firebase Storage delete error:",e),Error("Dosya silinirken hata oluştu")}}static formatFileSize(e){if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]}static async calculateUserQuota(e){try{let a=(await this.listUserFiles(e)).reduce((e,a)=>e+a.size,0);return{used:a,limit:0x140000000,percentage:Math.min(a/0x140000000*100,100)}}catch(e){return console.error("Error calculating quota:",e),{used:0,limit:0x140000000,percentage:0}}}static async cleanupExpiredFiles(e){try{let a=await this.listUserFiles(e),t=new Date,r=new Date(t.getTime()-2592e6),l=0;for(let t of a)if(new Date(t.timeCreated)<r)try{await this.deleteFile(e,t.fullPath),l++}catch(e){console.warn("Error deleting expired file:",t.fullPath,e)}return console.log("Cleaned up ".concat(l," expired files for user ").concat(e)),l}catch(e){return console.error("Error cleaning up expired files:",e),0}}}}}]);