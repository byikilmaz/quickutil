(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3272],{51691:(e,t,r)=>{Promise.resolve().then(r.bind(r,59895))},59895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(95155),l=r(12115),s=r(45142),i=r(40707),o=r(3623),n=r(14826),c=r(78767),d=r(27919),u=r(41708),m=r(64852),h=r(17146),p=r(96446),x=r(68651),g=r(68464),b=r(43768);function f(e){let{imageUrl:t,originalDimensions:r,cropOptions:s,onCropChange:i}=e,[o,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[u,m]=(0,l.useState)(null),h=(0,l.useRef)(null),p=(0,l.useRef)(null),x=(0,l.useCallback)((e,t,a)=>{if(!u)return s;let l=e-u.x,i=t-u.y,o=r.width/u.imageRect.width,n=r.height/u.imageRect.height,c=l*o,d=i*n,{x:m,y:h,width:p,height:x}=u.crop;switch(a){case"nw":m=Math.max(0,Math.min(m+c,m+p-10)),h=Math.max(0,Math.min(h+d,h+x-10)),p=u.crop.x+u.crop.width-m,x=u.crop.y+u.crop.height-h;break;case"ne":h=Math.max(0,Math.min(h+d,h+x-10)),p=Math.max(10,Math.min(p+c,r.width-m)),x=u.crop.y+u.crop.height-h;break;case"sw":m=Math.max(0,Math.min(m+c,m+p-10)),p=u.crop.x+u.crop.width-m,x=Math.max(10,Math.min(x+d,r.height-h));break;case"se":p=Math.max(10,Math.min(p+c,r.width-m)),x=Math.max(10,Math.min(x+d,r.height-h));break;case"n":h=Math.max(0,Math.min(h+d,h+x-10)),x=u.crop.y+u.crop.height-h;break;case"s":x=Math.max(10,Math.min(x+d,r.height-h));break;case"w":m=Math.max(0,Math.min(m+c,m+p-10)),p=u.crop.x+u.crop.width-m;break;case"e":p=Math.max(10,Math.min(p+c,r.width-m));break;case"move":m=Math.max(0,Math.min(m+c,r.width-p)),h=Math.max(0,Math.min(h+d,r.height-x))}return{x:Math.round(m),y:Math.round(h),width:Math.round(p),height:Math.round(x)}},[u,s,r]),g=(0,l.useCallback)(e=>{o&&c&&u&&i(x(e.clientX,e.clientY,c))},[o,c,u,x,i]),b=(0,l.useCallback)(()=>{n(!1),d(null),m(null)},[]),f=(0,l.useCallback)((e,t)=>{if(e.preventDefault(),e.stopPropagation(),!h.current||!p.current)return;let r=h.current.getBoundingClientRect(),a=p.current.getBoundingClientRect();n(!0),d(t),m({x:e.clientX,y:e.clientY,crop:{...s},containerRect:r,imageRect:a})},[s]);(0,l.useEffect)(()=>{if(o)return document.addEventListener("mousemove",g),document.addEventListener("mouseup",b),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)}},[o,g,b]);let v=s.x/r.width*100,y=s.y/r.height*100,w=s.width/r.width*100,j=s.height/r.height*100;return(0,a.jsxs)("div",{ref:h,className:"relative bg-gray-900 rounded-lg overflow-hidden min-h-[450px] flex items-center justify-center",onMouseUp:b,children:[(0,a.jsx)("img",{ref:p,src:t,alt:"Interactive Crop Preview",className:"max-w-full max-h-[450px] object-contain",draggable:!1,style:{userSelect:"none"}}),(0,a.jsx)("div",{className:"absolute pointer-events-none",style:{left:"".concat(v,"%"),top:"".concat(y,"%"),width:"".concat(w,"%"),height:"".concat(j,"%")},children:(0,a.jsxs)("div",{className:"absolute inset-0 border-2 border-purple-500 bg-purple-500/10 pointer-events-auto",children:[(0,a.jsx)("div",{className:"absolute inset-2 cursor-move bg-transparent",onMouseDown:e=>f(e,"move")}),[{id:"nw",className:"nw-resize",style:{top:"-6px",left:"-6px"}},{id:"ne",className:"ne-resize",style:{top:"-6px",right:"-6px"}},{id:"sw",className:"sw-resize",style:{bottom:"-6px",left:"-6px"}},{id:"se",className:"se-resize",style:{bottom:"-6px",right:"-6px"}},{id:"n",className:"n-resize",style:{top:"-6px",left:"50%",transform:"translateX(-50%)"}},{id:"s",className:"s-resize",style:{bottom:"-6px",left:"50%",transform:"translateX(-50%)"}},{id:"w",className:"w-resize",style:{left:"-6px",top:"50%",transform:"translateY(-50%)"}},{id:"e",className:"e-resize",style:{right:"-6px",top:"50%",transform:"translateY(-50%)"}}].map(e=>(0,a.jsx)("div",{className:"absolute w-3 h-3 bg-purple-500 border-2 border-white rounded-sm cursor-".concat(e.className," pointer-events-auto hover:bg-purple-600 transition-colors"),style:e.style,onMouseDown:t=>f(t,e.id)},e.id))]})}),(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 bg-black/50",style:{height:"".concat(y,"%")}}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50",style:{height:"".concat(100-y-j,"%")}}),(0,a.jsx)("div",{className:"absolute left-0 bg-black/50",style:{top:"".concat(y,"%"),height:"".concat(j,"%"),width:"".concat(v,"%")}}),(0,a.jsx)("div",{className:"absolute right-0 bg-black/50",style:{top:"".concat(y,"%"),height:"".concat(j,"%"),width:"".concat(100-v-w,"%")}})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 bg-black/70 text-white px-3 py-2 rounded-lg text-sm",children:[(0,a.jsxs)("p",{className:"font-medium",children:["Crop Area: ",s.width," \xd7 ",s.height]}),(0,a.jsxs)("p",{className:"text-xs opacity-80",children:["Position: (",s.x,", ",s.y,")"]})]})]})}function v(){let{user:e}=(0,h.A)(),{canUseFeature:t}=(0,p.a)(),{uploadFile:r}=(0,x.r)(),[v,y]=(0,l.useState)(!1),w=(0,l.useRef)(null),j=(0,l.useRef)(null),N=(0,l.useRef)(null),k=(0,l.useRef)(null),C=(0,l.useRef)(null),[D,M]=(0,l.useState)("upload"),[F,S]=(0,l.useState)(null),[z,E]=(0,l.useState)(""),[A,I]=(0,l.useState)(null),[P,R]=(0,l.useState)({x:0,y:0,width:0,height:0}),[U,B]=(0,l.useState)(!1),[T,_]=(0,l.useState)(0),[L,q]=(0,l.useState)(null);(0,l.useEffect)(()=>{"upload"===D&&w.current&&w.current.scrollIntoView({behavior:"smooth",block:"center"})},[D]);let{getRootProps:O,getInputProps:K,isDragActive:X}=(0,d.VB)({onDrop:e=>Y(e),accept:{"image/*":[".jpeg",".jpg",".png",".webp",".gif",".heic",".heif"]},multiple:!1}),Y=async e=>{if(0===e.length)return;let t=e[0];S(t),E(URL.createObjectURL(t));try{let e=await (0,b.vX)(t);I(e);let r={x:Math.round(.1*e.width),y:Math.round(.1*e.height),width:Math.round(.8*e.width),height:Math.round(.8*e.height)};R(r),M("configure"),setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},100)}catch(e){console.error("Error getting image dimensions:",e)}},G=e=>{let t;if(!A)return;let{width:r,height:a}=A;switch(e){case"square":let l=.9*Math.min(r,a);t={x:Math.round((r-l)/2),y:Math.round((a-l)/2),width:Math.round(l),height:Math.round(l)};break;case"center":t={x:Math.round(.15*r),y:Math.round(.15*a),width:Math.round(.7*r),height:Math.round(.7*a)};break;case"wide":t={x:0,y:Math.round(.2*a),width:r,height:Math.round(.6*a)};break;case"tall":t={x:Math.round(.2*r),y:0,width:Math.round(.6*r),height:a}}R(t)},Q=async()=>{if(F&&P.width&&P.height){M("processing"),B(!0),_(0),setTimeout(()=>{var e,t;null===(e=k.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"}),null===(t=k.current)||void 0===t||t.focus()},300);try{for(let e of[{progress:15,message:"Analyzing crop area...",delay:800},{progress:35,message:"Preparing crop...",delay:1e3},{progress:60,message:"Calculating dimensions...",delay:1200},{progress:85,message:"Cropping image...",delay:1e3},{progress:100,message:"Finalizing...",delay:800}])_(e.progress),await new Promise(t=>setTimeout(t,e.delay));let t=await (0,b.ey)(F,P),r={originalFile:F,croppedBlob:t.file,originalSize:F.size,croppedSize:t.file.size,cropDimensions:{width:P.width,height:P.height},downloadUrl:URL.createObjectURL(t.file)};q(r),M("result"),setTimeout(()=>{var e;null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},300),e&&await g.m2.createActivity(e.uid,{type:"image_crop",fileName:t.file.name,originalFileName:F.name,fileSize:F.size,processedSize:t.file.size,status:"success",category:"Image",processingTime:Date.now()})}catch(e){console.error("Crop error:",e),M("configure")}finally{B(!1)}}},V=()=>{M("upload"),S(null),E(""),q(null),I(null),R({x:0,y:0,width:0,height:0}),setTimeout(()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},100)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(20)].map((e,t)=>(0,a.jsx)("div",{className:"absolute w-4 h-4 bg-purple-300/20 rounded-full animate-pulse",style:{left:"".concat(5+4.5*t%95,"%"),top:"".concat(10+7*t%80,"%"),animationDelay:"".concat(.3*t,"s"),animationDuration:"2s"}},t))}),(0,a.jsx)(u.A,{type:"website"}),(0,a.jsx)("div",{className:"relative z-10 bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg",children:(0,a.jsx)(s.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Image Crop"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Step ","upload"===D?"1":"configure"===D?"2":"processing"===D?"3":"4"," of 4"]})]})]}),"upload"!==D&&(0,a.jsxs)("button",{onClick:V,className:"flex items-center space-x-2 px-4 py-2 bg-white/50 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/70 transition-all duration-200",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"New Image"})]})]})})}),(0,a.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{ref:w,className:"py-16 transition-all duration-500 ".concat("upload"===D?"opacity-100":"opacity-50 pointer-events-none"),children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("div",{className:"inline-flex items-center bg-gradient-to-r from-purple-100 to-pink-100 border border-purple-200 text-purple-800 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-purple-600 animate-pulse mr-2"}),"3M+ Resim Kırpıldı • AI Destekli"]}),(0,a.jsx)("h1",{className:"text-5xl font-bold mb-4",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 bg-clip-text text-transparent",children:"✂️ Image Crop"})}),(0,a.jsx)("p",{className:"text-xl text-gray-700 mb-8 max-w-2xl mx-auto",children:"Crop your images to the perfect size and focus on what matters most"})]}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"absolute inset-0 -m-8",children:[(0,a.jsx)("div",{className:"absolute inset-0 border-2 border-purple-200/30 rounded-full animate-spin",style:{animationDuration:"8s"}}),(0,a.jsx)("div",{className:"absolute inset-4 border-2 border-pink-200/30 rounded-full animate-spin",style:{animationDuration:"6s",animationDirection:"reverse"}})]}),(0,a.jsx)("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-yellow-400 rounded-full opacity-60 animate-bounce",style:{animationDelay:"0s"}}),(0,a.jsx)("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-green-400 rounded-full opacity-60 animate-bounce",style:{animationDelay:"1s"}}),(0,a.jsxs)("div",{...O(),className:"relative z-10 bg-white/80 backdrop-blur-sm border-2 border-dashed border-purple-300 rounded-2xl p-12 text-center hover:border-purple-400 hover:bg-white/90 transition-all duration-300 cursor-pointer ".concat(X?"border-purple-500 bg-purple-50":""),children:[(0,a.jsx)("input",{...K()}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.A,{className:"h-16 w-16 text-purple-400 mx-auto mb-4"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-400 rounded-lg opacity-20 animate-pulse"})]}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:X?"Drop your image here":"Select Image to Crop"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"PNG, JPEG, WebP, GIF • Up to 50MB"}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-pink-700 transition-all duration-200 inline-block",children:"Choose File"})]})]}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDD12"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Secure Processing"})]}),(0,a.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"⚡"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Lightning Fast"})]}),(0,a.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"✂️"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Precise Cropping"})]})]})]})]}),F&&A&&(0,a.jsx)("div",{ref:j,className:"py-16 transition-all duration-500 ".concat("configure"===D?"opacity-100":"opacity-50 pointer-events-none"),children:(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Configure Crop Area"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Select the area you want to keep"})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4 text-center",children:"Interactive Crop Preview"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4 text-center",children:"\uD83C\uDFAF Drag the handles to adjust crop area or click center to move"}),(0,a.jsx)(f,{imageUrl:z,originalDimensions:A,cropOptions:P,onCropChange:R}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[(0,a.jsx)("p",{className:"font-medium",children:F.name}),(0,a.jsxs)("p",{children:[(0,b.v7)(F.size)," • ",A.width,"\xd7",A.height]})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-black mb-3",children:"Quick Presets"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("button",{onClick:()=>G("square"),className:"p-3 border border-gray-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition-colors text-sm font-medium text-black",children:"\uD83D\uDD32 Square"}),(0,a.jsx)("button",{onClick:()=>G("center"),className:"p-3 border border-gray-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition-colors text-sm font-medium text-black",children:"\uD83C\uDFAF Center"}),(0,a.jsx)("button",{onClick:()=>G("wide"),className:"p-3 border border-gray-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition-colors text-sm font-medium text-black",children:"\uD83D\uDCD0 Wide"}),(0,a.jsx)("button",{onClick:()=>G("tall"),className:"p-3 border border-gray-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition-colors text-sm font-medium text-black",children:"\uD83D\uDCCF Tall"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-black mb-3",children:"Crop Dimensions"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-black font-medium mb-1",children:"X Position"}),(0,a.jsx)("input",{type:"number",value:P.x,onChange:e=>R(t=>({...t,x:parseInt(e.target.value)||0})),onFocus:e=>{e.target.placeholder&&(e.target.setAttribute("data-placeholder",e.target.placeholder),e.target.placeholder="")},onBlur:e=>{let t=e.target.getAttribute("data-placeholder");t&&!e.target.value&&(e.target.placeholder=t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm crop-input text-black",style:{color:"#000000 !important"},placeholder:"Enter X...",min:"0",max:A.width})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-black font-medium mb-1",children:"Y Position"}),(0,a.jsx)("input",{type:"number",value:P.y,onChange:e=>R(t=>({...t,y:parseInt(e.target.value)||0})),onFocus:e=>{e.target.placeholder&&(e.target.setAttribute("data-placeholder",e.target.placeholder),e.target.placeholder="")},onBlur:e=>{let t=e.target.getAttribute("data-placeholder");t&&!e.target.value&&(e.target.placeholder=t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm crop-input text-black",style:{color:"#000000 !important"},placeholder:"Enter Y...",min:"0",max:A.height})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-black font-medium mb-1",children:"Width"}),(0,a.jsx)("input",{type:"number",value:P.width,onChange:e=>R(t=>({...t,width:parseInt(e.target.value)||0})),onFocus:e=>{e.target.placeholder&&(e.target.setAttribute("data-placeholder",e.target.placeholder),e.target.placeholder="")},onBlur:e=>{let t=e.target.getAttribute("data-placeholder");t&&!e.target.value&&(e.target.placeholder=t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm crop-input text-black",style:{color:"#000000 !important"},placeholder:"Enter width...",min:"1",max:A.width})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-black font-medium mb-1",children:"Height"}),(0,a.jsx)("input",{type:"number",value:P.height,onChange:e=>R(t=>({...t,height:parseInt(e.target.value)||0})),onFocus:e=>{e.target.placeholder&&(e.target.setAttribute("data-placeholder",e.target.placeholder),e.target.placeholder="")},onBlur:e=>{let t=e.target.getAttribute("data-placeholder");t&&!e.target.value&&(e.target.placeholder=t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm crop-input text-black",style:{color:"#000000 !important"},placeholder:"Enter height...",min:"1",max:A.height})]})]})]})]}),(0,a.jsxs)("button",{ref:N,onClick:Q,disabled:!P.width||!P.height,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 px-6 rounded-xl font-semibold text-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center space-x-3",children:[(0,a.jsx)(s.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"✂️ Start Cropping"})]})]})})]})]})})}),"processing"===D&&(0,a.jsx)("div",{ref:k,className:"py-24 min-h-screen flex items-center justify-center",tabIndex:-1,style:{outline:"none"},children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto text-center w-full",children:(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-16 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50/80 via-pink-50/80 to-purple-50/80 opacity-50"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("div",{className:"relative mb-12",children:(0,a.jsxs)("div",{className:"w-40 h-40 mx-auto relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 border-4 border-purple-200 rounded-full"}),(0,a.jsx)("div",{className:"absolute inset-2 border-4 border-pink-300 rounded-full animate-spin",style:{animationDuration:"2s"}}),(0,a.jsx)("div",{className:"absolute inset-4 border-4 border-purple-400 rounded-full animate-spin",style:{animationDuration:"1.5s",animationDirection:"reverse"}}),(0,a.jsx)("div",{className:"absolute inset-6 border-4 border-pink-500 rounded-full animate-spin",style:{animationDuration:"1s"}}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(s.A,{className:"h-16 w-16 text-purple-600 animate-pulse"})})]})}),(0,a.jsx)("h3",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-6",children:"✂️ AI Cropping Your Image"}),(0,a.jsx)("p",{className:"text-xl text-gray-700 mb-8 font-medium",children:"Please wait while we precisely crop your image..."}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-6 overflow-hidden shadow-inner",children:(0,a.jsx)("div",{className:"h-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all duration-500 relative shadow-lg",style:{width:"".concat(T,"%")},children:(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-pulse"})})}),(0,a.jsxs)("p",{className:"text-lg text-purple-600 font-semibold",children:[T,"% Complete"]}),(0,a.jsx)("div",{className:"mt-8 bg-purple-50 rounded-2xl p-4 border border-purple-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-purple-700 font-medium",children:T<15?"Analyzing crop area...":T<35?"Preparing crop...":T<60?"Calculating dimensions...":T<85?"Cropping image...":"Finalizing..."})]})})]})]})})}),"result"===D&&L&&(0,a.jsx)("div",{ref:C,className:"py-16",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(n.A,{className:"h-10 w-10 text-white"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2",children:"✂️ Crop Complete!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Your image has been cropped successfully"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Original"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:(0,a.jsx)("img",{src:z,alt:"Original",className:"max-w-full max-h-48 object-contain mx-auto rounded-lg"})}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsx)("p",{children:(0,b.v7)(L.originalSize)}),(0,a.jsxs)("p",{children:[null==A?void 0:A.width,"\xd7",null==A?void 0:A.height]})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Cropped"}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 mb-4 border-2 border-purple-200",children:(0,a.jsx)("img",{src:L.downloadUrl,alt:"Cropped",className:"max-w-full max-h-48 object-contain mx-auto rounded-lg"})}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-green-600 font-medium",children:[(0,a.jsx)("p",{children:(0,b.v7)(L.croppedSize)}),(0,a.jsxs)("p",{children:[L.cropDimensions.width,"\xd7",L.cropDimensions.height]})]})]})]}),(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsxs)("button",{onClick:()=>{if(L){let e=document.createElement("a");e.href=L.downloadUrl,e.download="cropped_".concat(L.originalFile.name),e.click()}},className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 px-8 rounded-xl font-semibold text-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center space-x-3 mx-auto",children:[(0,a.jsx)(n.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"✂️ Download Cropped Image"})]}),(0,a.jsx)("button",{onClick:V,className:"text-gray-600 hover:text-gray-900 px-6 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:"Crop Another Image"})]})]})})})})]}),v&&(0,a.jsx)(m.A,{onClose:()=>y(!1)})]})}},96446:(e,t,r)=>{"use strict";r.d(t,{S:()=>o,a:()=>n});var a=r(95155),l=r(12115),s=r(17146);let i=(0,l.createContext)(void 0);function o(e){let{children:t}=e,{user:r}=(0,s.A)(),l={unlimited:!0,storageEnabled:!!r,maxFileSize:100,filesExpireInDays:30};return(0,a.jsx)(i.Provider,{value:{quotaInfo:l,canUseFeature:()=>!0,canStoreFiles:()=>!!r,checkFileSize:e=>e<=1048576*l.maxFileSize,getMaxFileSize:()=>l.maxFileSize,loading:!1},children:t})}function n(){let e=(0,l.useContext)(i);return void 0===e?(console.log("useQuota called outside QuotaProvider, returning mock values"),{quotaInfo:{unlimited:!0,storageEnabled:!1,maxFileSize:100,filesExpireInDays:30},canUseFeature:()=>!0,canStoreFiles:()=>!1,checkFileSize:()=>!0,getMaxFileSize:()=>100,loading:!1}):e}},68651:(e,t,r)=>{"use strict";r.d(t,{L:()=>c,r:()=>n});var a=r(95155),l=r(12115),s=r(17146),i=r(56960);let o=(0,l.createContext)(null),n=()=>(0,l.useContext)(o)||(console.log("useStorage called outside StorageProvider, returning mock values"),{files:[],quota:{used:0,limit:0x140000000,percentage:0},loading:!1,error:null,uploadFile:async()=>({file:{},downloadURL:""}),deleteFile:async()=>{},refreshFiles:async()=>{},refreshQuota:async()=>{},cleanupExpiredFiles:async()=>0}),c=e=>{let{children:t}=e,{user:r}=(0,s.A)(),[n,c]=(0,l.useState)([]),[d,u]=(0,l.useState)({used:0,limit:0x140000000,percentage:0}),[m,h]=(0,l.useState)(!1),[p,x]=(0,l.useState)(null),g=(0,l.useCallback)(async()=>{if(!r){c([]);return}try{x(null);let e=await i.b.listUserFiles(r.uid);c(e)}catch(e){console.error("Error loading files:",e),x("Dosyalar y\xfcklenirken hata oluştu"),c([])}},[r]),b=(0,l.useCallback)(async()=>{if(!r){u({used:0,limit:0x140000000,percentage:0});return}try{let e=await i.b.calculateUserQuota(r.uid);u(e)}catch(e){console.error("Error loading quota:",e)}},[r]);(0,l.useEffect)(()=>{r?(g(),b()):(c([]),u({used:0,limit:0x140000000,percentage:0}))},[r,g,b]);let f=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf",a=arguments.length>2?arguments[2]:void 0;if(!r)throw Error("Kullanıcı giriş yapmamış");try{x(null),h(!0);let l=await i.b.uploadFile(r.uid,e,t,a);return await g(),await b(),l}catch(e){throw console.error("Error uploading file:",e),x("Dosya y\xfckleme başarısız"),e}finally{h(!1)}},v=async e=>{if(!r)throw Error("Kullanıcı giriş yapmamış");try{x(null),h(!0),await i.b.deleteFile(r.uid,e),await g(),await b()}catch(e){throw console.error("Error deleting file:",e),x("Dosya silinirken hata oluştu"),e}finally{h(!1)}},y=async()=>{await g()},w=async()=>{await b()},j=async()=>{if(!r)throw Error("Kullanıcı giriş yapmamış");try{x(null),h(!0);let e=await i.b.cleanupExpiredFiles(r.uid);return await g(),await b(),e}catch(e){throw console.error("Error cleaning up files:",e),x("Dosya temizleme başarısız"),e}finally{h(!1)}};return(0,a.jsx)(o.Provider,{value:{files:n,quota:d,loading:m,error:p,uploadFile:f,deleteFile:v,refreshFiles:y,refreshQuota:w,cleanupExpiredFiles:j},children:t})}},56960:(e,t,r)=>{"use strict";r.d(t,{b:()=>s});var a=r(80333),l=r(44595);class s{static async uploadFile(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pdf",s=arguments.length>3?arguments[3]:void 0;try{let i=Date.now(),o=s||"".concat(r,"_").concat(i,"_").concat(t.name),n="users/".concat(e,"/").concat(r,"/").concat(o),c=(0,a.KR)(l.IG,n),d={contentType:t.type,customMetadata:{userId:e,originalName:t.name,uploadedAt:new Date().toISOString(),expiresAt:new Date(Date.now()+2592e6).toISOString(),category:r}},u=await (0,a.D)(c,t,d),m=await (0,a.qk)(u.ref),h=await (0,a.yb)(u.ref),p={id:u.ref.name,name:o,fullPath:u.ref.fullPath,size:h.size,contentType:h.contentType||t.type,timeCreated:h.timeCreated,updated:h.updated,downloadURL:m};return console.log("File uploaded to Firebase Storage:",p),{file:p,downloadURL:m}}catch(e){throw console.error("Firebase Storage upload error:",e),Error("Dosya y\xfckleme başarısız")}}static async listUserFiles(e){try{let t=(0,a.KR)(l.IG,"users/".concat(e)),r=await (0,a._w)(t),s=[];for(let e of r.prefixes)for(let t of(await (0,a._w)(e)).items)try{let[e,r]=await Promise.all([(0,a.yb)(t),(0,a.qk)(t)]);s.push({id:t.name,name:t.name,fullPath:t.fullPath,size:e.size,contentType:e.contentType||"application/octet-stream",timeCreated:e.timeCreated,updated:e.updated,downloadURL:r})}catch(e){console.warn("Error getting file metadata:",t.fullPath,e)}return s.sort((e,t)=>new Date(t.timeCreated).getTime()-new Date(e.timeCreated).getTime()),s}catch(e){throw console.error("Firebase Storage list error:",e),Error("Dosya listesi alınamadı")}}static async deleteFile(e,t){try{if(!t.startsWith("users/".concat(e,"/")))throw Error("Bu dosyaya erişim izniniz yok");let r=(0,a.KR)(l.IG,t);await (0,a.XR)(r),console.log("File deleted from Firebase Storage:",t)}catch(e){throw console.error("Firebase Storage delete error:",e),Error("Dosya silinirken hata oluştu")}}static formatFileSize(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}static async calculateUserQuota(e){try{let t=(await this.listUserFiles(e)).reduce((e,t)=>e+t.size,0);return{used:t,limit:0x140000000,percentage:Math.min(t/0x140000000*100,100)}}catch(e){return console.error("Error calculating quota:",e),{used:0,limit:0x140000000,percentage:0}}}static async cleanupExpiredFiles(e){try{let t=await this.listUserFiles(e),r=new Date,a=new Date(r.getTime()-2592e6),l=0;for(let r of t)if(new Date(r.timeCreated)<a)try{await this.deleteFile(e,r.fullPath),l++}catch(e){console.warn("Error deleting expired file:",r.fullPath,e)}return console.log("Cleaned up ".concat(l," expired files for user ").concat(e)),l}catch(e){return console.error("Error cleaning up expired files:",e),0}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,1794,8779,8405,6921,5228,6335,3238,9290,5019,8047,6366,2432,7979,4884,7098,9744,2033,2322,9592,7331,5030,8392,7694,3719,5845,9915,8049,2922,6137,5070,2707,8007,39,408,6727,5370,4191,2834,957,4895,5759,9473,4409,234,707,4852,8464,3768,8441,7358],()=>t(51691)),_N_E=e.O()}]);