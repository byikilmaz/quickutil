"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7146],{7146:(e,a,r)=>{r.d(a,{A:()=>c,AuthProvider:()=>m});var i=r(5155),t=r(2115),n=r(4565),o=r(7058),l=r(2205),s=r(4595),d=r(2638);let u=(0,t.createContext)(void 0),c=()=>{let e=(0,t.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},m=e=>{let{children:a}=e,[r,c]=(0,t.useState)(null),[m,f]=(0,t.useState)(null),[h,g]=(0,t.useState)(!0),[y,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{p(!0)},[]),(0,t.useEffect)(()=>{if(y)return(0,n.hg)(s.j2,async e=>{try{if(console.log("Auth state changed:",e?"User logged in":"User logged out"),c(e),e)try{let r=await (0,o.x7)((0,o.H9)(s.kA,"users",e.uid));if(r.exists()){var a;let i=r.data();f({firstName:i.firstName||"",lastName:i.lastName||"",email:e.email||"",createdAt:(null===(a=i.createdAt)||void 0===a?void 0:a.toDate())||new Date}),console.log("User profile loaded successfully")}else console.log("User document not found, creating basic profile"),f({firstName:"",lastName:"",email:e.email||"",createdAt:new Date})}catch(a){console.error("Error fetching user profile:",a),(0,d.gr)(a,{code:a.code||"unknown",customData:{operation:"fetch_user_profile",userId:e.uid}}),f({firstName:"",lastName:"",email:e.email||"",createdAt:new Date})}else f(null),console.log("User logged out, profile cleared")}catch(e){console.error("Auth state change error:",e),(0,d.gr)(e,{code:e.code||"unknown",customData:{operation:"auth_state_change"}})}finally{g(!1),console.log("Auth loading completed")}})},[y]);let k=async(e,a)=>{try{await (0,n.x9)(s.j2,e,a)}catch(a){throw console.error("Login error:",a),(0,d.gr)(a,{code:a.code||"unknown",customData:{operation:"login",email:e,timestamp:new Date().toISOString()}}),a}},w=async(e,a,r,i)=>{try{let{user:t}=await (0,n.eJ)(s.j2,e,a);await (0,n.r7)(t,{displayName:"".concat(r," ").concat(i)}),await (0,o.BN)((0,o.H9)(s.kA,"users",t.uid),{firstName:r,lastName:i,email:e,createdAt:new Date,updatedAt:new Date,emailVerified:!1});try{{let a=(0,l.Qg)(s.Cn,"sendVerificationEmail"),n={url:"".concat(window.location.origin,"/verify-email?uid=").concat(t.uid),handleCodeInApp:!0};await a({email:e,firstName:r,lastName:i,verificationLink:n.url}),console.log("Custom verification email sent successfully")}}catch(a){console.error("Custom email sending failed, falling back to Firebase default:",a),(0,d.gr)(a,{code:a.code||"email-send-failed",customData:{operation:"send_verification_email",email:e,userId:t.uid}}),await (0,n.gA)(t)}f({firstName:r,lastName:i,email:e,createdAt:new Date})}catch(t){throw console.error("Registration error:",t),(0,d.gr)(t,{code:t.code||"unknown",customData:{operation:"register",email:e,hasFirstName:!!r,hasLastName:!!i,passwordLength:a.length,timestamp:new Date().toISOString()}}),t}},v=async()=>{try{if(!r)throw Error("No user logged in");if(!m)throw Error("User profile not found");try{{let e=(0,l.Qg)(s.Cn,"sendVerificationEmail"),a={url:"".concat(window.location.origin,"/verify-email?uid=").concat(r.uid),handleCodeInApp:!0};await e({email:r.email,firstName:m.firstName,lastName:m.lastName,verificationLink:a.url}),console.log("Custom verification email resent successfully")}}catch(e){console.error("Custom email resend failed, falling back to Firebase default:",e),(0,d.gr)(e,{code:e.code||"email-resend-failed",customData:{operation:"resend_verification_email",email:r.email,userId:r.uid}}),await (0,n.gA)(r)}}catch(e){throw console.error("Resend verification error:",e),(0,d.gr)(e,{code:e.code||"resend-verification-failed",customData:{operation:"resend_verification",hasUser:!!r,hasUserProfile:!!m}}),e}},b=async()=>{try{await (0,n.CI)(s.j2),f(null)}catch(e){throw console.error("Logout error:",e),(0,d.gr)(e,{code:e.code||"logout-failed",customData:{operation:"logout",userId:null==r?void 0:r.uid}}),e}};return y?(0,i.jsx)(u.Provider,{value:{user:r,userProfile:m,loading:h,login:k,register:w,logout:b,resendVerification:v},children:a}):(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}},2638:(e,a,r)=>{r.d(a,{gr:()=>l});var i=r(4595),t=r(5003);let n="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,15)),o=[],l=(e,a)=>{let r={id:"firebase_".concat(Date.now()),category:"firebase",severity:s(a.code),message:e.message,stack:e.stack,context:{code:a.code,...a.customData},timestamp:new Date,sessionId:n,recommendations:d(a.code),relatedIssues:[]};return o.push(r),i.zS&&(0,t.$s)(i.zS,"error_analyzed",{error_category:r.category,error_severity:r.severity,error_code:a.code,session_id:n}),r},s=e=>({"auth/api-key-not-valid":"critical","auth/invalid-api-key":"critical","auth/project-not-found":"critical","auth/user-not-found":"high","auth/wrong-password":"high","auth/invalid-email":"high","auth/user-disabled":"high","auth/email-already-in-use":"medium","auth/weak-password":"medium","auth/network-request-failed":"medium","permission-denied":"high","not-found":"medium","already-exists":"medium","resource-exhausted":"high",unauthenticated:"high"})[e]||"medium",d=e=>({"auth/api-key-not-valid":["Firebase Console'dan doğru API key'i kontrol edin","Environment variables'ları doğrulayın (.env.local)","Firebase project ayarlarını kontrol edin","API key'in kısıtlamalarını kontrol edin"],"auth/user-not-found":["Kullanıcının kayıtlı olup olmadığını kontrol edin","Email adresini doğrulayın","Kayıt sayfasına y\xf6nlendirin","Kullanıcı arama işlemini geliştirin"],"auth/wrong-password":["Şifre doğruluğunu kontrol edin","Şifre sıfırlama \xf6zelliği sunun","Caps Lock durumunu kontrol edin","Şifre g\xf6r\xfcn\xfcrl\xfck toggle'ı ekleyin"],"auth/email-already-in-use":["Giriş yapmaya y\xf6nlendirin","Email adresinin zaten kullanıldığını belirtin","Şifre sıfırlama se\xe7eneği sunun","Sosyal medya girişi alternatifi sunun"],"permission-denied":["Firestore security rules'ları kontrol edin","Kullanıcı authentication durumunu kontrol edin","Gerekli izinleri doğrulayın","Admin panelinden izinleri kontrol edin"],"auth/network-request-failed":["İnternet bağlantısını kontrol edin","Firebase servis durumunu kontrol edin","Retry mekanizması ekleyin","Offline mode desteği ekleyin"]})[e]||["Hata kodunu Firebase documentation'dan araştırın","Console'daki detaylı hata mesajlarını kontrol edin","Firebase support'a başvurun","Community forum'larda benzer durumları araştırın"]},4595:(e,a,r)=>{r.d(a,{Cn:()=>h,IG:()=>f,j2:()=>c,kA:()=>m,zS:()=>g});var i=r(9904),t=r(4565),n=r(7058),o=r(333),l=r(2205),s=r(5003);let d={apiKey:"AIzaSyCRDKZr-JKCk4L29UlrRE-lh1Q1bDAD3j8",authDomain:"quickutil-d2998.firebaseapp.com",projectId:"quickutil-d2998",storageBucket:"quickutil-d2998.firebasestorage.app",messagingSenderId:"768751015182",appId:"1:768751015182:web:ef3472a90fccf57a72335f"};if(!d.apiKey)throw Error("Firebase API key is missing. Please check your environment variables.");let u=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)(d),c=(0,t.xI)(u),m=(0,n.aU)(u),f=(0,o.c7)(u),h=(0,l.Uz)(u);(0,t.oM)(c,t.F0).catch(e=>{console.warn("Auth persistence setup failed:",e)});let g=null;try{g=(0,s.P5)(u)}catch(e){console.warn("Analytics initialization failed:",e)}}}]);